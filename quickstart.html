<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>Obsidian: Quick Start</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Obsidian
   </div>
   <div id="projectbrief">Probabilistic Geophysical Joint Inversion</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('quickstart.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Quick Start </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This is a short guide on how to start using Obsidian quickly to perform an example inversion. This guide serves as a introductory tutorial to both the theory and the practical processes involved in running an inversion with Obsidian. The files for this example can be found in the example/simple directory in the Obsidian source.</p>
<h2>Installation </h2>
<p>To start using Obisidian, you must first install all the necessary prerequisite software and then build Obsidian. A detailed installation guide can be found here. Once you have built the Obsidian source code, you should have four executables available to you in the build directory:</p>
<ul>
<li><code>obsidian</code>: The geophysical inversion server that orchestrates the inversion process.</li>
<li><code>shard</code>: A worker instance that connects to the obisdian server and performs sensor simulations for the server.</li>
<li><code>prospector</code>: A tool used to sample from the prior before doing an inversion</li>
<li><code>pickaxe</code>: A tool used to extract samples and other data from the output of the obsidian server.</li>
<li><code>mason</code>: A tool for analysing samples from pickaxe and prospector.</li>
</ul>
<h2>A Simple Scenario </h2>
<p>The basic goal of an Obsidian geophysical inversion is to reconstruct the distribution over geological structures and properties of a given region from sensor measurements taken at that region. However, the majority of inversion problems are under-constrained, meaning that there can be many plausible solutions to the inversion that are all consistent with sensor data. Rather than computing a single most plausible solution, Obsidian takes a probabilistic approach to this problem by sampling from a joint probability distribution of rock properties for a set of discrete regions, and the shape and location of the boundaries that delineate these regions.</p>
<p>Let us examine a toy geological scenario. Obsidian currently supports models of sedimantary basins, with or without intruding granite structures. The boundaries between each layer are modelled by using a set of <em>control points</em>. These points control the surface shape of the boundary (e.g. how deep various points on the boundaries are). For this simple example, we will use two layer boundaries, each with one control point in the centre of the boundaries. This way, the boundaries are constrained to be flat planes whose depths are allowed to vary. Between these two boundaries, we will have a layer whose density can vary. Here is a 3D model of the ground truth.</p>
<h2>Incorporating prior information </h2>
<p>Obsidian implements Bayesian inference, which allows us to incorporate prior knowledge about the geological structure and unknown parameters. This prior information can be read in from CSV files. Obsidian allows Gaussian priors over the depths of each of the control points as well as the rock properties. For this simple example, we will</p>
<h2>Incorporating sensor data </h2>
<p>Complementing the prior information is the actual geological sensor data. For simplicity, we will work with a grid array of gravity sensors over the surface.</p>
<h2>Looking at Prior Samples </h2>
<p>A good way to see if the prior you've specified is reasonable is to draw some samples from it. Prospector is a tool that does this, outputing an NPZ file which can be voxelised with mason (see below). To get 10 samples from the prior, type: <code>./prospector -l0 -i&lt;inputfile&gt; -n10</code></p>
<h2>Running the inversion </h2>
<p>Once all the configuration and input files have been written, we can start the inversion. First we start the Obsidian server by running <code>./obsidian -l0</code>. Then we run some workers <code>./shard -l0</code>.</p>
<h2>Extracting output using pickaxe </h2>
<p>Once the inversion has finished, Obsidian stores the samples from the Markov Chains in a database. We can use the pickaxe tool to extract the samples. Two standard procedures in MCMC are burn-in (the number of samples to discard from the beginning of the chain) and thinning (the number of samples to discard between samples that we keep). Both procedures help to reduce correlation between samples.</p>
<p>We can use pickaxe by running <code>./pickaxe --burnin=1000 --nthin=10</code>.</p>
<h2>Analysing output using mason </h2>
<p>After we have extracted relevant samples from the database using pickaxe, we can then use mason to:</p>
<ul>
<li>Compute marginal distributions over properties of interest (e.g. the probability of granites exceeding a certain temperature).</li>
<li>Compute marginal distributions over layer boundaries (e.g. the probability of ).</li>
</ul>
<p>Running <code>./mason</code> will output voxelisations for each of the samples.</p>
<p>First we can visualise the... <code>python python/visMarginalise.py output.npz layer1</code> <code>python python/visMarginalise.py output.npz layer2</code> <code>python python/visMarginalise.py output.npz density</code> <code>python python/visHistogram.py output.npz</code> </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Jun 30 2014 12:14:33 for Obsidian by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.7 </li>
  </ul>
</div>
</body>
</html>

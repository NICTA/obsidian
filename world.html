<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>Obsidian: World Model</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Obsidian
   </div>
   <div id="projectbrief">Probabilistic Geophysical Joint Inversion</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('world.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">World Model </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Defining the search space of possible underground geological structures is a crucial aspect of the inversion process. Obsidian uses a layer-cake model, where the boundaries between each layer are modelled using a grid of <em>offsets</em> and <em>control points</em>.</p>
<p>The offset matrix is a high resolution 2D grid which represents the mean depths of the points in the grid. The control point grid is similar to the offset matrix, except the depths of the points are part of the model parameters. These points are varied by the inference engine to fit the sensor data, whereas the points in the offset matrix are fixed. The control point grids are interpolated to produce a smooth surface, and is added to the offset grid to produce the final layer boundary surface.</p>
<p>Both the offsets and control controls grid are defined by a X and Y resolution, and the grid points are evenly spaced along the bounds of each dimension. The resolution of the offset grid does not significantly impact the performance, but increasing the resolution of the control points grid increases the number of dimensions in the inversion problem.</p>
<h2>Creating a World Specification </h2>
<p>The <a class="el" href="classobsidian_1_1_world_spec.html">WorldSpec</a> class defines the basic structure of the world that do not vary during an inversion. It contains the x, y, and z bounds of the world, as well as a list of layer boundaries (each boundary is of type <a class="el" href="structobsidian_1_1_boundary_spec.html">BoundarySpec</a>. For instance, the following code creates a boundary with a 50x30 offset grid (a flat surface at 1500 depth) and a 5x3 control point grid:</p>
<div class="fragment"><div class="line">worldSpec.boundaries.push_back({Eigen::MatrixXd::Ones(50, 30) * 1500, std::make_pair(5, 3),  BoundaryClass::Normal});</div>
</div><!-- fragment --><p>An InterpolatorSpec wraps the information contained in a BoundarySpec and is used to perform interpolation for the layer boundaries.</p>
<h1>Queries, transitions and height maps </h1>
<p>Queries represent a 2D grid that is used to extract the depths of the layer boundaries. They can be thought of as a set of vertical lines parallel to the z (depth) axis. The points at which these vertical lines intersect with the layer boundaries are the layer transitions.</p>
<p>Queries are implemented in the <a class="el" href="structobsidian_1_1world_1_1_query.html">Query</a> class. The <a class="el" href="namespaceobsidian_1_1world.html#aa70137625956ce1a8827ca1033d53dc9">getTransitions()</a> function takes a query, and returns, for each layer, the depth of each intersection point in the 2D grid defined by the query. Using this function, we can obtain a depth map of each layer boundary.</p>
<h1>Voxelisation </h1>
<p>Most of the forward models implemented by Obsidian cannot directly operate on these boundary height maps. The world model is first <em>voxelised</em> by approximating the boundaries and layers with a 3D mesh grid of voxels (3D pixels). Forward models can then treat each voxel as a rectangle prism with certain rock properties. Obviously, the results would not be identical to the real world model, but it serves as a good approximation when the resolution of the voxelisation is high. In Obsidian, voxelisation can be done using either the getVoxels() function or the <a class="el" href="namespaceobsidian_1_1world.html#a2bba3b4206146065291af47b5a43b42a">voxelise()</a> function. The former is a higher level wrapper around the latter to specifically extract a particular rock property. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Jun 30 2014 12:14:33 for Obsidian by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.7 </li>
  </ul>
</div>
</body>
</html>
